<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>News - Fast Forward</title>
  <!-- Thème du site -->
  <link rel="stylesheet" href="style.css" />
  <!-- Loader Instagram (une seule fois, en https) -->
  <script src="https://www.instagram.com/embed.js" async></script>
</head>
<body>
  <!-- Header cohérent (burger + menu) -->
  <header>
    <a class="logo" href="index.html" aria-label="Fast Forward — Accueil">
      <img src="images/logo.png" alt="Fast Forward" class="logo-img" />
    </a>
    <nav aria-label="Navigation principale">
      <ul>
        <li><a href="index.html">ACCUEIL</a></li>
        <li><a href="news.html" aria-current="page">NEWS</a></li>
        <li><a href="livestream.html">LIVESTREAM / CAPTATION LIVE</a></li>
        <li><a href="location.html">LOCATION</a></li>
        <li><a href="consulting.html">CONSULTING</a></li>
        <li><a href="equipe.html">QUI SOMMES-NOUS</a></li>
        <li><a href="contact.html">CONTACT</a></li>
      </ul>
    </nav>
    <!-- Bouton burger (utilisé par script.js) -->
    <button class="burger" aria-label="Ouvrir le menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </header>


  <!-- Grille d’actualités Instagram -->
  <section class="content-section">
    <h2 style="text-align:center;">NOS DERNIERS PROJETS</h2>
    <div id="ig-embeds" class="instagram-grid"><!-- Les cartes seront insérées ici --></div>
  </section>

  <!-- Script simple : remplissez le tableau IG_POSTS -->
  <script id="ig-dynamic-embed">
  (function(){
    /**
     * REMPLISSEZ la liste ci-dessous avec vos URLs Instagram (exemples) :
     * "https://www.instagram.com/p/DOCKCBfimUk/",
     * "https://www.instagram.com/reel/XXXXXXXXXXX/",
     * "https://www.instagram.com/p/YYYYYYYYYYY/",
     * Vous pouvez en mettre autant que vous voulez.
     */
    const IG_POSTS = [
      // ---- À REMPLIR : vos URLs Instagram ci-dessous ----
      // "https://www.instagram.com/p/DOCKCBfimUk/?img_index=1",
      // "https://www.instagram.com/p/Czyxqv5tUCs/?img_index=2",
      // "https://www.instagram.com/p/CzlmfydNaLp/",
      // "https://www.instagram.com/p/CmLT25gtLhK/",
      // "https://www.instagram.com/p/CcUqxijqZdF/?img_index=1",
      // "https://www.instagram.com/p/CT4SMePgsUU/?img_index=1",
      // ---- Fin de zone à remplir ----
    ];

    const grid = document.getElementById("ig-embeds");
    if (!grid) return;

    const normalize = (url) => {
      if (!url) return null;
      try {
        const u = new URL(url, location.origin);
        u.protocol = "https:";
        if (!u.pathname.endsWith("/")) u.pathname += "/";
        if (!u.searchParams.has("utm_source")) u.searchParams.set("utm_source","ig_embed");
        return u.toString();
      } catch(e){ return null; }
    };

    IG_POSTS.map(normalize).filter(Boolean).forEach((href) => {
      const card = document.createElement("div");
      card.className = "insta-card";
      const wrap = document.createElement("div");
      wrap.className = "insta-embed";
      const bq = document.createElement("blockquote");
      bq.className = "instagram-media";
      bq.setAttribute("data-instgrm-permalink", href);
      bq.setAttribute("data-instgrm-version", "14");
      const a = document.createElement("a");
      a.href = href; a.target = "_blank"; a.rel = "noopener";
      bq.appendChild(a);
      wrap.appendChild(bq);
      card.appendChild(wrap);
      grid.appendChild(card);
    });

    // Déclenche l'embed Instagram quand le script est prêt
    function process(){ try { if (window.instgrm && instgrm.Embeds && typeof instgrm.Embeds.process === "function") instgrm.Embeds.process(); } catch(e){} }
    if (document.readyState === "complete") process(); else window.addEventListener("load", process);
  })();
  </script>

  <!-- Backdrop pour la fermeture du menu en mobile (utilisé par script.js) -->
  <div id="menu-backdrop" aria-hidden="true"></div>

  <!-- JS du site (gère le burger + fallback Instagram) -->
  <script src="script.js" defer></script>
</body>
</html>
